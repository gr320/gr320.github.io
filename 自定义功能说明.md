# Blowfish 主题自定义功能说明

## 已集成的功能

从 Dolt 主题迁移并集成到 Blowfish 主题的自定义功能：

### 1. Google AdSense 广告

#### 配置位置
`config/_default/params.toml`

```toml
[advertisement]
  adsense = "ca-pub-5892704178984065"

[adsense]
  enable = true  # 是否启用广告
  client = "ca-pub-5892704178984065"
  topSlot = "4112260467"     # 文章顶部广告位
  bottomSlot = "4112260467"  # 文章底部广告位
  sidebarSlot = "9038936472" # 侧边栏广告位（预留）
```

#### 显示位置
- **文章顶部**：在文章内容之前显示
- **文章底部**：在文章内容之后、分享链接之前显示

#### 控制开关
- 设置 `enable = false` 可完全禁用广告
- 设置 `enable = true` 启用广告

---

### 2. 百度统计

#### 配置位置
`config/_default/params.toml`

```toml
[baidu]
  analytics = "your_baidu_analytics_id"  # 填写您的百度统计 ID
```

#### 如何获取百度统计 ID
1. 登录百度统计后台：https://tongji.baidu.com
2. 获取统计代码
3. 从代码中找到类似 `hm.js?abc123` 的部分
4. 将 `abc123` 填入配置

#### 控制开关
- 留空或注释掉 `analytics` 参数即可禁用
- 填写 ID 后自动启用

---

### 3. ICP 备案号显示

#### 配置位置
`config/_default/params.toml`

```toml
[icp]
  number = "京ICP备18048836号"  # ICP 备案号
  police = "京公网安备 11010802012345号"  # 公安备案号（可选）
```

#### 显示位置
页脚底部居中显示，带有链接

#### 控制开关
- 注释掉整个 `[icp]` 部分即可隐藏备案号
- 只填写 `number` 可只显示 ICP 备案
- 只填写 `police` 可只显示公安备案
- 两者都填写会用 `|` 分隔显示

---

## 相关文件

### 新增文件
- `layouts/partials/adsense-article-top.html` - 文章顶部广告
- `layouts/partials/adsense-article-bottom.html` - 文章底部广告
- `layouts/partials/analytics/baidu.html` - 百度统计
- `layouts/partials/extend-head.html` - 头部扩展（加载 AdSense 和百度统计）
- `layouts/partials/extend-footer.html` - 页脚扩展（显示备案号）
- `layouts/_default/single.html` - 自定义文章布局（集成广告显示）

### 修改文件
- `config/_default/params.toml` - 添加广告、统计、备案配置

---

## 使用示例

### 启用所有功能

```toml
[advertisement]
  adsense = "ca-pub-5892704178984065"

[adsense]
  enable = true
  client = "ca-pub-5892704178984065"
  topSlot = "4112260467"
  bottomSlot = "4112260467"
  sidebarSlot = "9038936472"

[baidu]
  analytics = "your_baidu_id"

[icp]
  number = "京ICP备18048836号"
  police = "京公网安备 11010802012345号"
```

### 只启用备案号

```toml
[advertisement]
  # adsense = ""

[adsense]
  enable = false

[baidu]
  analytics = ""

[icp]
  number = "京ICP备18048836号"
```

### 完全禁用所有自定义功能

```toml
[adsense]
  enable = false

[baidu]
  analytics = ""

# [icp]  # 注释整个部分
```

---

## 注意事项

1. **AdSense 审核**：确保您的网站已通过 Google AdSense 审核
2. **百度统计**：填写正确的统计 ID，否则不会生效
3. **备案号**：确保填写的备案号真实有效
4. **性能优化**：广告脚本采用异步加载，不影响页面性能

---

## 未来扩展

如需添加其他功能（如侧边栏广告、其他统计工具等），可以：

1. 参考现有文件结构
2. 在 `layouts/partials/` 目录创建新的 partial
3. 在 `params.toml` 中添加相应配置
4. 在适当的位置引用 partial

---

**最后更新时间**：2025-12-18
